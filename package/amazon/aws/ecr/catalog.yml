Product:
  name: Amazon Elastic Container Registry
  versions: [2015.9.21]
  package: amazon.aws.ecr
  description: |-
    Amazon Elastic Container Registry
  link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/Welcome.html
  contentType: json
Operations:
  BatchCheckLayerAvailability:
    description: |-
      Checks the availability of one or more image layers in a repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_BatchCheckLayerAvailability.html
    example:
      inputs: [
        {
          "registryId": "string",
          "layerDigests": [
            "string"
          ],
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "layers": [
            {
              "layerSize": 1,
              "mediaType": "string",
              "layerDigest": "string",
              "layerAvailability": "string"
            }
          ],
          "failures": [
            {
              "failureCode": "string",
              "layerDigest": "string",
              "failureReason": "string"
            }
          ]
        }
      ]
  BatchDeleteImage:
    description: |-
      Deletes a list of specified images within a repository. Images are specified with either an imageTag or imageDigest.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_BatchDeleteImage.html
    example:
      inputs: [
        {
          "imageIds": [
            {
              "imageTag": "string",
              "imageDigest": "string"
            }
          ],
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "failures": [
            {
              "imageId": {
                "imageTag": "string",
                "imageDigest": "string"
              },
              "failureCode": "string",
              "failureReason": "string"
            }
          ],
          "imageIds": [
            {
              "imageTag": "string",
              "imageDigest": "string"
            }
          ]
        }
      ]
  BatchGetImage:
    description: |-
      Gets detailed information for an image. Images are specified with either an imageTag or imageDigest.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_BatchGetImage.html
    example:
      inputs: [
        {
          "imageIds": [
            {
              "imageTag": "string",
              "imageDigest": "string"
            }
          ],
          "registryId": "string",
          "repositoryName": "string",
          "acceptedMediaTypes": [
            "string"
          ]
        }
      ]
      outputs: [
        {
          "images": [
            {
              "imageId": {
                "imageTag": "string",
                "imageDigest": "string"
              },
              "registryId": "string",
              "imageManifest": "string",
              "repositoryName": "string",
              "imageManifestMediaType": "string"
            }
          ],
          "failures": [
            {
              "imageId": {
                "imageTag": "string",
                "imageDigest": "string"
              },
              "failureCode": "string",
              "failureReason": "string"
            }
          ]
        }
      ]
  CompleteLayerUpload:
    description: |-
      Informs Amazon ECR that the image layer upload has completed for a specified registry, repository name, and upload ID. You can optionally provide a sha256 digest of the image layer for data validation purposes.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_CompleteLayerUpload.html
    example:
      inputs: [
        {
          "uploadId": "string",
          "registryId": "string",
          "layerDigests": [
            "string"
          ],
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "uploadId": "string",
          "registryId": "string",
          "layerDigest": "string",
          "repositoryName": "string"
        }
      ]
  CreateRepository:
    description: |-
      Creates a repository. For more information, see Amazon ECR Repositories in the Amazon Elastic Container Registry User Guide.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_CreateRepository.html
    example:
      inputs: [
        {
          "tags": [
            {
              "Key": "string",
              "Value": "string"
            }
          ],
          "repositoryName": "string",
          "imageTagMutability": "string",
          "encryptionConfiguration": {
            "kmsKey": "string",
            "encryptionType": "string"
          },
          "imageScanningConfiguration": {
            "scanOnPush": false
          }
        }
      ]
      outputs: [
        {
          "repository": {
            "createdAt": 1481289211.615,
            "registryId": "string",
            "repositoryArn": "string",
            "repositoryUri": "string",
            "repositoryName": "string",
            "imageTagMutability": "string",
            "encryptionConfiguration": {
              "kmsKey": "string",
              "encryptionType": "string"
            },
            "imageScanningConfiguration": {
              "scanOnPush": false
            }
          }
        }
      ]
  DeleteLifecyclePolicy:
    description: |-
      Deletes the lifecycle policy associated with the specified repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_DeleteLifecyclePolicy.html
    example:
      inputs: [
        {
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "registryId": "string",
          "repositoryName": "string",
          "lastEvaluatedAt": 1481289211.615,
          "lifecyclePolicyText": "string"
        }
      ]
  DeleteRegistryPolicy:
    description: |-
      Deletes the registry permissions policy.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_DeleteRegistryPolicy.html
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "policyText": "string",
          "registryId": "string"
        }
      ]
  DeleteRepository:
    description: |-
      Deletes a repository. If the repository contains images, you must either delete all images in the repository or use the force option to delete the repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_DeleteRepository.html
    example:
      inputs: [
        {
          "force": false,
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "repository": {
            "createdAt": 1481289211.615,
            "registryId": "string",
            "repositoryArn": "string",
            "repositoryUri": "string",
            "repositoryName": "string",
            "imageTagMutability": "string",
            "encryptionConfiguration": {
              "kmsKey": "string",
              "encryptionType": "string"
            },
            "imageScanningConfiguration": {
              "scanOnPush": false
            }
          }
        }
      ]
  DeleteRepositoryPolicy:
    description: |-
      Deletes the repository policy associated with the specified repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_DeleteRepositoryPolicy.html
    example:
      inputs: [
        {
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "policyText": "string",
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
  DescribeImageScanFindings:
    description: |-
      Returns the scan findings for the specified image.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_DescribeImageScanFindings.html
    example:
      inputs: [
        {
          "imageId": {
            "imageTag": "string",
            "imageDigest": "string"
          },
          "nextToken": "string",
          "maxResults": 1,
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "imageId": {
            "imageTag": "string",
            "imageDigest": "string"
          },
          "nextToken": "string",
          "registryId": "string",
          "repositoryName": "string",
          "imageScanStatus": {
            "status": "string",
            "description": "string"
          },
          "imageScanFindings": {
            "findings": [
              {
                "uri": "string",
                "name": "string",
                "severity": "string",
                "attributes": [
                  {
                    "key": "string",
                    "value": "string"
                  }
                ],
                "description": "string"
              }
            ],
            "imageScanCompletedAt": 1481289211.615,
            "findingSeverityCounts": {
              "string": 1
            },
            "vulnerabilitySourceUpdatedAt": 1481289211.615
          }
        }
      ]
  DescribeImages:
    description: |-
      Returns metadata about the images in a repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_DescribeImages.html
    example:
      inputs: [
        {
          "filter": {
            "tagStatus": "string"
          },
          "imageIds": [
            {
              "imageTag": "string",
              "imageDigest": "string"
            }
          ],
          "nextToken": "string",
          "maxResults": 1,
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "nextToken": "string",
          "imageDetails": [
            {
              "imageTags": [
                "string"
              ],
              "registryId": "string",
              "imageDigest": "string",
              "imagePushedAt": 1481289211.615,
              "repositoryName": "string",
              "imageScanStatus": {
                "status": "string",
                "description": "string"
              },
              "imageSizeInBytes": 1,
              "artifactMediaType": "string",
              "imageManifestMediaType": "string",
              "imageScanFindingsSummary": {
                "imageScanCompletedAt": 1481289211.615,
                "findingSeverityCounts": {
                  "string": 1
                },
                "vulnerabilitySourceUpdatedAt": 1481289211.615
              }
            }
          ]
        }
      ]
  DescribeRegistry:
    description: |-
      Describes the settings for a registry. The replication configuration for a repository can be created or updated with the PutReplicationConfiguration API action.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_DescribeRegistry.html
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "registryId": "string",
          "replicationConfiguration": {
            "rules": [
              {
                "destinations": [
                  {
                    "region": "string",
                    "registryId": "string"
                  }
                ]
              }
            ]
          }
        }
      ]
  DescribeRepositories:
    description: |-
      Describes image repositories in a registry.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_DescribeRepositories.html
    example:
      inputs: [
        {
          "nextToken": "string",
          "maxResults": 1,
          "registryId": "string",
          "repositoryNames": [
            "string"
          ]
        }
      ]
      outputs: [
        {
          "nextToken": "string",
          "repositories": [
            {
              "createdAt": 1481289211.615,
              "registryId": "string",
              "repositoryArn": "string",
              "repositoryUri": "string",
              "repositoryName": "string",
              "imageTagMutability": "string",
              "encryptionConfiguration": {
                "kmsKey": "string",
                "encryptionType": "string"
              },
              "imageScanningConfiguration": {
                "scanOnPush": false
              }
            }
          ]
        }
      ]
  GetAuthorizationToken:
    description: |-
      Retrieves an authorization token. An authorization token represents your IAM authentication credentials and can be used to access any Amazon ECR registry that your IAM principal has access to. The authorization token is valid for 12 hours.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_GetAuthorizationToken.html
    example:
      inputs: [
        {
          "registryIds": [
            "string"
          ]
        }
      ]
      outputs: [
        {
          "authorizationData": [
            {
              "expiresAt": 1481289211.615,
              "proxyEndpoint": "string",
              "authorizationToken": "string"
            }
          ]
        }
      ]
  GetDownloadUrlForLayer:
    description: |-
      Retrieves the pre-signed Amazon S3 download URL corresponding to an image layer. You can only get URLs for image layers that are referenced in an image.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_GetDownloadUrlForLayer.html
    example:
      inputs: [
        {
          "registryId": "string",
          "layerDigest": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "downloadUrl": "string",
          "layerDigest": "string"
        }
      ]
  GetLifecyclePolicy:
    description: |-
      Retrieves the lifecycle policy for the specified repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_GetLifecyclePolicy.html
    example:
      inputs: [
        {
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "registryId": "string",
          "repositoryName": "string",
          "lastEvaluatedAt": 1481289211.615,
          "lifecyclePolicyText": "string"
        }
      ]
  GetLifecyclePolicyPreview:
    description: |-
      Retrieves the results of the lifecycle policy preview request for the specified repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_GetLifecyclePolicyPreview.html
    example:
      inputs: [
        {
          "filter": {
            "tagStatus": "string"
          },
          "imageIds": [
            {
              "imageTag": "string",
              "imageDigest": "string"
            }
          ],
          "nextToken": "string",
          "maxResults": 1,
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "status": "string",
          "summary": {
            "expiringImageTotalCount": 1
          },
          "nextToken": "string",
          "registryId": "string",
          "previewResults": [
            {
              "action": {
                "type": "string"
              },
              "imageTags": [
                "string"
              ],
              "imageDigest": "string",
              "imagePushedAt": 1481289211.615,
              "appliedRulePriority": 1
            }
          ],
          "repositoryName": "string",
          "lifecyclePolicyText": "string"
        }
      ]
  GetRegistryPolicy:
    description: |-
      Retrieves the permissions policy for a registry.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_GetRegistryPolicy.html
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "policyText": "string",
          "registryId": "string"
        }
      ]
  GetRepositoryPolicy:
    description: |-
      Retrieves the repository policy for the specified repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_GetRepositoryPolicy.html
    example:
      inputs: [
        {
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "policyText": "string",
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
  InitiateLayerUpload:
    description: |-
      Notifies Amazon ECR that you intend to upload an image layer.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_InitiateLayerUpload.html
    example:
      inputs: [
        {
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "partSize": 1,
          "uploadId": "string"
        }
      ]
  ListImages:
    description: |-
      Lists all the image IDs for the specified repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_ListImages.html
    example:
      inputs: [
        {
          "filter": {
            "tagStatus": "string"
          },
          "nextToken": "string",
          "maxResults": 1,
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "imageIds": [
            {
              "imageTag": "string",
              "imageDigest": "string"
            }
          ],
          "nextToken": "string"
        }
      ]
  ListTagsForResource:
    description: |-
      List the tags for an Amazon ECR resource.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_ListTagsForResource.html
    example:
      inputs: [
        {
          "resourceArn": "string"
        }
      ]
      outputs: [
        {
          "tags": [
            {
              "Key": "string",
              "Value": "string"
            }
          ]
        }
      ]
  PutImage:
    description: |-
      Creates or updates the image manifest and tags associated with an image.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_PutImage.html
    example:
      inputs: [
        {
          "imageTag": "string",
          "registryId": "string",
          "imageDigest": "string",
          "imageManifest": "string",
          "repositoryName": "string",
          "imageManifestMediaType": "string"
        }
      ]
      outputs: [
        {
          "image": {
            "imageId": {
              "imageTag": "string",
              "imageDigest": "string"
            },
            "registryId": "string",
            "imageManifest": "string",
            "repositoryName": "string",
            "imageManifestMediaType": "string"
          }
        }
      ]
  PutImageScanningConfiguration:
    description: |-
      Updates the image scanning configuration for the specified repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_PutImageScanningConfiguration.html
    example:
      inputs: [
        {
          "registryId": "string",
          "repositoryName": "string",
          "imageScanningConfiguration": {
            "scanOnPush": false
          }
        }
      ]
      outputs: [
        {}
      ]
  PutImageTagMutability:
    description: |-
      Updates the image tag mutability settings for the specified repository. For more information, see Image Tag Mutability in the Amazon Elastic Container Registry User Guide.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_PutImageTagMutability.html
    example:
      inputs: [
        {
          "registryId": "string",
          "repositoryName": "string",
          "imageTagMutability": "string"
        }
      ]
      outputs: [
        {}
      ]
  PutLifecyclePolicy:
    description: |-
      Creates or updates the lifecycle policy for the specified repository. For more information, see Lifecycle Policy Template.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_PutLifecyclePolicy.html
    example:
      inputs: [
        {
          "registryId": "string",
          "repositoryName": "string",
          "lifecyclePolicyText": "string"
        }
      ]
      outputs: [
        {}
      ]
  PutRegistryPolicy:
    description: |-
      Creates or updates the permissions policy for your registry.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_PutRegistryPolicy.html
    example:
      inputs: [
        {
          "policyText": "string"
        }
      ]
      outputs: [
        {
          "policyText": "string",
          "registryId": "string"
        }
      ]
  PutReplicationConfiguration:
    description: |-
      Creates or updates the replication configuration for a registry. The existing replication configuration for a repository can be retrieved with the DescribeRegistry API action. The first time the PutReplicationConfiguration API is called, a service-linked IAM role is created in your account for the replication process. For more information, see Using Service-Linked Roles for Amazon ECR in the Amazon Elastic Container Registry User Guide.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_PutReplicationConfiguration.html
    example:
      inputs: [
        {
          "replicationConfiguration": {
            "rules": [
              {
                "destinations": [
                  {
                    "region": "string",
                    "registryId": "string"
                  }
                ]
              }
            ]
          }
        }
      ]
      outputs: [
        {}
      ]
  SetRepositoryPolicy:
    description: |-
      Applies a repository policy to the specified repository to control access permissions. For more information, see Amazon ECR Repository Policies in the Amazon Elastic Container Registry User Guide.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_SetRepositoryPolicy.html
    example:
      inputs: [
        {
          "force": false,
          "policyText": "string",
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "policyText": "string",
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
  StartImageScan:
    description: |-
      Starts an image vulnerability scan. An image scan can only be started once per day on an individual image. This limit includes if an image was scanned on initial push. For more information, see Image Scanning in the Amazon Elastic Container Registry User Guide.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_StartImageScan.html
    example:
      inputs: [
        {
          "imageId": {
            "imageTag": "string",
            "imageDigest": "string"
          },
          "registryId": "string",
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "imageId": {
            "imageTag": "string",
            "imageDigest": "string"
          },
          "registryId": "string",
          "repositoryName": "string",
          "imageScanStatus": {
            "status": "string",
            "description": "string"
          }
        }
      ]
  StartLifecyclePolicyPreview:
    description: |-
      Starts a preview of a lifecycle policy for the specified repository. This allows you to see the results before associating the lifecycle policy with the repository.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_StartLifecyclePolicyPreview.html
    example:
      inputs: [
        {
          "registryId": "string",
          "repositoryName": "string",
          "lifecyclePolicyText": "string"
        }
      ]
      outputs: [
        {
          "status": "string",
          "registryId": "string",
          "repositoryName": "string",
          "lifecyclePolicyText": "string"
        }
      ]
  TagResource:
    description: |-
      Adds specified tags to a resource with the specified ARN. Existing tags on a resource are not changed if they are not specified in the request parameters.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_TagResource.html
    example:
      inputs: [
        {
          "tags": [
            {
              "Key": "string",
              "Value": "string"
            }
          ],
          "resourceArn": "string"
        }
      ]
      outputs: [
        {}
      ]
  UntagResource:
    description: |-
      Deletes specified tags from a resource.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_UntagResource.html
    example:
      inputs: [
        {
          "tagKeys": [
            "string"
          ],
          "resourceArn": "string"
        }
      ]
      outputs: [
        {}
      ]
  UploadLayerPart:
    description: |-
      Uploads an image layer part to Amazon ECR.
    versions:
      from: 2015.9.21
    link: https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_UploadLayerPart.html
    example:
      inputs: [
        {
          "uploadId": "string",
          "registryId": "string",
          "partLastByte": 1,
          "layerPartBlob": "blob",
          "partFirstByte": 1,
          "repositoryName": "string"
        }
      ]
      outputs: [
        {
          "uploadId": "string",
          "registryId": "string",
          "repositoryName": "string",
          "lastByteReceived": 1
        }
      ]