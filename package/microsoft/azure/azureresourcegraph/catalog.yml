Product:
  name: Azure Resource Graph
  versions: [2019.4.1,2020.4.1-preview]
  package: microsoft.azure.azureresourcegraph
  description: |-
    AzureResourceGraph
  link: https://docs.microsoft.com/en-us/azure/governance/resource-graph/
  contentType: json
Operations:
  ResourceGraph.2019.04.01.Resources.Resources:
    description: |-
      Queries the resources managed by Azure Resource Manager for all subscriptions specified in the request.
    versions:
      from: 2019.4.1
      to: 2019.4.1
    link: https://docs.microsoft.com/en-us/rest/api/azureresourcegraph/resourcegraph(2019-04-01)/resources/resources
    example:
      inputs: [
        {
          "query": "where type =~ 'Microsoft.Compute/virtualMachines' | summarize count() by tostring(properties.storageProfile.osDisk.osType)",
          "subscriptions": [
            "cfbbd179-59d2-4052-aa06-9270a38aa9d6"
          ]
        }
      ]
      outputs: [
        {
          "data": {
            "rows": [
              [
                "Linux",
                7
              ],
              [
                "Windows",
                23
              ]
            ],
            "columns": [
              {
                "name": "properties_storageProfile_osDisk_osType",
                "type": "string"
              },
              {
                "name": "count_",
                "type": "integer"
              }
            ]
          },
          "count": 2,
          "totalRecords": 2,
          "resultTruncated": "false"
        }
      ]
  ResourceGraph.2020.04.01Preview.GraphQuery.CreateOrUpdate:
    description: |-
      Create a new graph query.
    versions:
      from: 2020.4.1-preview
      to: 2020.4.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/azureresourcegraph/resourcegraph(2020-04-01-preview)/graphquery/createorupdate
    example:
      inputs: [
        {
          "tags": {},
          "properties": {
            "query": "where isnotnull(tags['Prod']) and properties.extensions[0].Name == 'docker'",
            "description": "Docker VMs in PROD"
          }
        }
      ]
      outputs: [
        {
          "id": " /subscriptions/024e2271-06fa-46b6-9079-f1ed3c7b070e/resources/my-resource-group/providers/Microsoft.ResourceGraph/queries/MyDockerVMs",
          "etag": "5d64408e-4ca3-41f7-b725-6914f3012afa",
          "name": "MyDockerVMs",
          "tags": {},
          "type": "Microsoft.ResourceGraph/queries",
          "properties": {
            "query": "where isnotnull(tags['Prod']) and properties.extensions[0].Name == 'docker'",
            "resultKind": "basic",
            "description": "Docker VMs in PROD",
            "timeModified": "2019-03-12T13:51:13-07:00"
          },
          "systemData": {
            "createdAt": "2020-04-27T21:53:29.0928001Z",
            "createdBy": "string",
            "createdByType": "User",
            "lastModifiedAt": "2020-04-27T21:53:29.0928001Z",
            "lastModifiedBy": "string",
            "lastModifiedByType": "User"
          }
        }
      ]
  ResourceGraph.2020.04.01Preview.GraphQuery.Delete:
    description: |-
      Delete a graph query.
    versions:
      from: 2020.4.1-preview
      to: 2020.4.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/azureresourcegraph/resourcegraph(2020-04-01-preview)/graphquery/delete
    example:
      inputs: [
        {}
      ]
      outputs: [
        {}
      ]
  ResourceGraph.2020.04.01Preview.GraphQuery.Get:
    description: |-
      Get a single graph query by its resourceName.
    versions:
      from: 2020.4.1-preview
      to: 2020.4.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/azureresourcegraph/resourcegraph(2020-04-01-preview)/graphquery/get
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "id": " /subscriptions/024e2271-06fa-46b6-9079-f1ed3c7b070e/resources/my-resource-group/providers/Microsoft.ResourceGraph/queries/MyDockerVMs",
          "etag": "5d64408e-4ca3-41f7-b725-6914f3012afa",
          "name": "MyDockerVMs",
          "tags": null,
          "type": "Microsoft.ResourceGraph/queries",
          "properties": {
            "query": "where isnotnull(tags['Prod']) and properties.extensions[0].Name == 'docker'",
            "resultKind": "basic",
            "description": "Docker VMs in PROD",
            "timeModified": "2019-03-12T13:51:13-07:00"
          },
          "systemData": {
            "createdAt": "2020-04-27T21:53:29.0928001Z",
            "createdBy": "string",
            "createdByType": "User",
            "lastModifiedAt": "2020-04-27T21:53:29.0928001Z",
            "lastModifiedBy": "string",
            "lastModifiedByType": "User"
          }
        }
      ]
  ResourceGraph.2020.04.01Preview.GraphQuery.List:
    description: |-
      Get all graph queries defined within a specified subscription and resource group.
    versions:
      from: 2020.4.1-preview
      to: 2020.4.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/azureresourcegraph/resourcegraph(2020-04-01-preview)/graphquery/list
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "value": [
            {
              "id": "/subscriptions/87f4f8b0-83c1-4aa9-b318-5237aeb15264/resources/rid1/providers/Microsoft.ResourceGraph/queries/MyDockerVMs",
              "etag": "5d64408e-4ca3-41f7-b725-6914f3012afa",
              "name": "MyDockerVMs",
              "tags": {},
              "type": "Microsoft.ResourceGraph/queries",
              "properties": {
                "query": "where isnotnull(tags['Prod']) and properties.extensions[0].Name == 'docker'",
                "resultKind": "basic",
                "description": "Docker VMs in PROD",
                "timeModified": "2019-03-12T13:51:13-07:00"
              },
              "systemData": {
                "createdAt": "2020-04-27T21:53:29.0928001Z",
                "createdBy": "string",
                "createdByType": "User",
                "lastModifiedAt": "2020-04-27T21:53:29.0928001Z",
                "lastModifiedBy": "string",
                "lastModifiedByType": "User"
              }
            },
            {
              "id": "/subscriptions/6abb2f31-3e6a-4134-9968-219a596012a0/resources/rid2/providers/Microsoft.ResourceGraph/queries/MyTestVMs",
              "etag": "b0809832-ca62-4133-8f13-0c46580f9db1",
              "name": "MyTestVMs",
              "tags": {},
              "type": "Microsoft.ResourceGraph/queries",
              "properties": {
                "query": "where isnotnull(tags['Prod']) and properties.extensions[0].Name == 'test'",
                "resultKind": "basic",
                "description": "Test VMs in PROD",
                "timeModified": "2019-03-13T13:51:13-07:00"
              },
              "systemData": {
                "createdAt": "2020-04-24T18:53:29.0928001Z",
                "createdBy": "string",
                "createdByType": "Application",
                "lastModifiedAt": "2020-04-24T18:53:29.0928001Z",
                "lastModifiedBy": "string",
                "lastModifiedByType": "Application"
              }
            }
          ],
          "nextLink": "https://management.azure.com/subscriptions/subscriptionId/providers/Microsoft.ResourceGraph/queries?api-version=2019-09-01-preview&$top=10&$skiptoken=skiptoken"
        }
      ]
  ResourceGraph.2020.04.01Preview.GraphQuery.Update:
    description: |-
      Updates a graph query that has already been added.
    versions:
      from: 2020.4.1-preview
      to: 2020.4.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/azureresourcegraph/resourcegraph(2020-04-01-preview)/graphquery/update
    example:
      inputs: [
        {
          "etag": "b0809832-ca62-4133-8f13-0c46580f9db1",
          "tags": null,
          "properties": {
            "query": "where isnotnull(tags['Prod']) and properties.extensions[0].Name == 'docker'",
            "description": "Modified description"
          }
        }
      ]
      outputs: [
        {
          "id": " /subscriptions/024e2271-06fa-46b6-9079-f1ed3c7b070e/resources/my-resource-group/providers/Microsoft.ResourceGraph/queries/MyDockerVMs",
          "etag": "73811091-6188-4523-97b7-b5e7134e7fd9",
          "name": "MyDockerVMs",
          "tags": null,
          "type": "Microsoft.ResourceGraph/queries",
          "properties": {
            "query": "where isnotnull(tags['Prod']) and properties.extensions[0].Name == 'docker'",
            "resultKind": "basic",
            "description": "Modified description",
            "timeModified": "2019-03-14T13:51:13-07:00"
          },
          "systemData": {
            "createdAt": "2020-04-23T18:53:29.0928001Z",
            "createdBy": "string",
            "createdByType": "Application",
            "lastModifiedAt": "2020-04-27T21:53:29.0928001Z",
            "lastModifiedBy": "string",
            "lastModifiedByType": "User"
          }
        }
      ]
  ResourceGraph.2020.04.01Preview.Resources.Resources:
    description: |-
      Queries the resources managed by Azure Resource Manager for all subscriptions specified in the request.
    versions:
      from: 2020.4.1-preview
      to: 2020.4.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/azureresourcegraph/resourcegraph(2020-04-01-preview)/resources/resources
    example:
      inputs: [
        {
          "query": "Resources | where type =~ 'Microsoft.Compute/virtualMachines' | summarize count() by tostring(properties.storageProfile.osDisk.osType)",
          "subscriptions": [
            "cfbbd179-59d2-4052-aa06-9270a38aa9d6"
          ]
        }
      ]
      outputs: [
        {
          "data": {
            "rows": [
              [
                "Linux",
                7
              ],
              [
                "Windows",
                23
              ]
            ],
            "columns": [
              {
                "name": "properties_storageProfile_osDisk_osType",
                "type": "string"
              },
              {
                "name": "count_",
                "type": "integer"
              }
            ]
          },
          "count": 2,
          "facets": [],
          "totalRecords": 2,
          "resultTruncated": "false"
        }
      ]