Product:
  name: Azure Deployment Manager
  versions: [2019.11.1-preview]
  package: microsoft.azure.deploymentmanager
  description: |-
    DeploymentManager
  link: https://docs.microsoft.com/en-us/archive/msdn-magazine/2019/august/azure-devops-introducing-azure-deployment-manager
  contentType: json
Operations:
  ArtifactSources.CreateOrUpdate:
    description: |-
      Creates or updates an artifact source.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/artifactsources/createorupdate
    example:
      inputs: [
        {
          "tags": {},
          "location": "centralus",
          "properties": {
            "sourceType": "AzureStorage",
            "authentication": {
              "type": "Sas",
              "properties": {
                "sasUri": "https://mystorageaccount.blob.core.windows.net/myartifactsource?st=2018-07-07T14%3A10%3A00Z&se=2019-12-31T15%3A10%3A00Z&sp=rl&sv=2017-04-17&sr=c&sig=Yh2SoJ1NhhLRwCLln7de%2Fkabcdefghijklmno5sWEIk%3D"
              }
            }
          }
        }
      ]
      outputs: [
        {
          "name": "myArtifactSource",
          "tags": {},
          "type": "Microsoft.DeploymentManager/artifactSources",
          "location": "centralus",
          "properties": {
            "sourceType": "AzureStorage",
            "authentication": {
              "type": "Sas",
              "properties": {
                "sasUri": "https://mystorageaccount.blob.core.windows.net/myartifactsource?st=2018-07-07T14%3A10%3A00Z&se=2019-12-31T15%3A10%3A00Z&sp=rl&sv=2017-04-17&sr=c&sig=Yh2SoJ1NhhLRwCLln7de%2Fkabcdefghijklmno5sWEIk%3D"
              }
            }
          }
        }
      ]
  ArtifactSources.Delete:
    description: |-
      Deletes an artifact source.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/artifactsources/delete
    example:
      inputs: [
        {}
      ]
      outputs: [
        {}
      ]
  ArtifactSources.Get:
    description: |-
      Gets an artifact source.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/artifactsources/get
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "name": "myArtifactSource",
          "tags": {},
          "type": "Microsoft.DeploymentManager/artifactSources",
          "location": "centralus",
          "properties": {
            "sourceType": "AzureStorage",
            "authentication": {
              "type": "Sas",
              "properties": {
                "sasUri": "https://mystorageaccount.blob.core.windows.net/myartifactsource?st=2018-07-07T14%3A10%3A00Z&se=2019-12-31T15%3A10%3A00Z&sp=rl&sv=2017-04-17&sr=c&sig=Yh2SoJ1NhhLRwCLln7de%2Fkabcdefghijklmno5sWEIk%3D"
              }
            }
          }
        }
      ]
  ArtifactSources.List:
    description: |-
      Lists the artifact sources in a resource group.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/artifactsources/list
    example:
      inputs: [
        {}
      ]
      outputs: [
        [
          {
            "name": "TemplatesArtifactSource",
            "tags": {},
            "type": "Microsoft.DeploymentManager/artifactSources",
            "location": "centralus",
            "properties": {
              "sourceType": "AzureStorage",
              "authentication": {
                "type": "Sas",
                "properties": {
                  "sasUri": "https://mystorageaccount.blob.core.windows.net/templates?st=2018-07-07T14%3A10%3A00Z&se=2019-12-31T15%3A10%3A00Z&sp=rl&sv=2017-04-17&sr=c&sig=Yh2SoJ1NhhLRwCLln7de%2Fkabcdefghijklmno5sWEIk%3D"
                }
              }
            }
          },
          {
            "name": "BinariesArtifactSource",
            "tags": {},
            "type": "Microsoft.DeploymentManager/artifactSources",
            "location": "centralus",
            "properties": {
              "sourceType": "AzureStorage",
              "artifactRoot": "builds/1.0.0.1",
              "authentication": {
                "type": "Sas",
                "properties": {
                  "sasUri": "https://mystorageaccount.blob.core.windows.net/binaries?st=2018-07-07T14%3A10%3A00Z&se=2019-12-31T15%3A10%3A00Z&sp=rl&sv=2017-04-17&sr=c&sig=Yh2SoJ1NhhLRwCLln7de%2Fkabcdefghijklmno5sWEIk%3D"
                }
              }
            }
          }
        ]
      ]
  Rollouts.Cancel:
    description: |-
      Stops a running rollout.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/rollouts/cancel
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "name": "myRollout",
          "tags": {},
          "type": "Microsoft.DeploymentManager/rollouts",
          "identity": {
            "type": "userAssigned",
            "identityIds": [
              "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userassignedidentities/myuseridentity"
            ]
          },
          "location": "centralus",
          "properties": {
            "status": "Canceling",
            "services": [
              {
                "name": "myService1",
                "serviceUnits": [
                  {
                    "name": "myTopologyUni1",
                    "steps": [
                      {
                        "name": "preDeploymentStep1",
                        "status": "succeeded",
                        "operationInfo": {
                          "endTime": "2018-08-28T03:35:28.556Z",
                          "startTime": "2018-08-28T03:33:56.386Z"
                        }
                      },
                      {
                        "name": "preDeploymentStep2",
                        "status": "succeeded",
                        "operationInfo": {
                          "endTime": "2018-08-28T03:37:28.556Z",
                          "startTime": "2018-08-28T03:36:56.386Z"
                        }
                      },
                      {
                        "name": "deploy",
                        "status": "running",
                        "operationInfo": {
                          "startTime": "2018-08-28T03:38:56.386Z",
                          "lastUpdatedTime": "2018-08-28T03:39:28.556Z"
                        },
                        "resourceOperations": [
                          {
                            "statusCode": "OK",
                            "operationId": "20FC5A21382DA306",
                            "resourceName": "keyVaultcentralus",
                            "resourceType": "Microsoft.KeyVault/vaults",
                            "statusMessage": "",
                            "provisioningState": "Succeeded"
                          }
                        ]
                      }
                    ],
                    "deploymentMode": "Incremental",
                    "targetResourceGroup": "myDeploymentResourceGroup"
                  }
                ],
                "targetLocation": "centralus",
                "targetSubscriptionId": "600c95c5-3ee5-44fe-b190-ca38a19adcd7"
              }
            ],
            "stepGroups": [
              {
                "name": "FirstRegion",
                "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit1'",
                "preDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep1"
                  },
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep2"
                  }
                ],
                "postDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/postDeployStep1"
                  }
                ]
              },
              {
                "name": "SecondRegion",
                "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit2'",
                "preDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep3"
                  },
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep4"
                  }
                ],
                "dependsOnStepGroups": [
                  "FirstRegion"
                ],
                "postDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/postDeployStep5"
                  }
                ]
              }
            ],
            "buildVersion": "1.0.0.1",
            "operationInfo": {
              "startTime": "2018-08-28T03:33:56.386Z",
              "retryAttempt": 0
            },
            "artifactSourceId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/artifactSources/myArtifactSource",
            "totalRetryAttempts": 0,
            "targetServiceTopologyId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/serviceTopologies/myTopology"
          }
        }
      ]
  Rollouts.CreateOrUpdate:
    description: |-
      Creates or updates a rollout.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/rollouts/createorupdate
    example:
      inputs: [
        {
          "tags": {},
          "identity": {
            "type": "userAssigned",
            "identityIds": [
              "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userassignedidentities/myuseridentity"
            ]
          },
          "location": "centralus",
          "properties": {
            "stepGroups": [
              {
                "name": "FirstRegion",
                "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit1'",
                "preDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep1"
                  },
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep2"
                  }
                ],
                "postDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/postDeployStep1"
                  }
                ]
              },
              {
                "name": "SecondRegion",
                "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit2'",
                "preDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep3"
                  },
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep4"
                  }
                ],
                "dependsOnStepGroups": [
                  "FirstRegion"
                ],
                "postDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/postDeployStep5"
                  }
                ]
              }
            ],
            "buildVersion": "1.0.0.1",
            "artifactSourceId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/artifactSources/myArtifactSource",
            "targetServiceTopologyId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/serviceTopologies/myTopology"
          }
        }
      ]
      outputs: [
        {
          "name": "myRollout",
          "tags": {},
          "type": "Microsoft.DeploymentManager/rollouts",
          "identity": {
            "type": "userAssigned",
            "identityIds": [
              "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userassignedidentities/myuseridentity"
            ]
          },
          "location": "centralus",
          "properties": {
            "stepGroups": [
              {
                "name": "FirstRegion",
                "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit1'",
                "preDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep1"
                  },
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep2"
                  }
                ],
                "postDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/postDeployStep1"
                  }
                ]
              },
              {
                "name": "SecondRegion",
                "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit2'",
                "preDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep3"
                  },
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep4"
                  }
                ],
                "dependsOnStepGroups": [
                  "FirstRegion"
                ],
                "postDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/postDeployStep5"
                  }
                ]
              }
            ],
            "buildVersion": "1.0.0.1",
            "artifactSourceId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/artifactSources/myArtifactSource",
            "targetServiceTopologyId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/serviceTopologies/myTopology"
          }
        }
      ]
  Rollouts.Delete:
    description: |-
      Deletes a rollout resource.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/rollouts/delete
    example:
      inputs: [
        {}
      ]
      outputs: [
        {}
      ]
  Rollouts.Get:
    description: |-
      Gets detailed information of a rollout.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/rollouts/get
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "name": "myRollout",
          "tags": {},
          "type": "Microsoft.DeploymentManager/rollouts",
          "identity": {
            "type": "userAssigned",
            "identityIds": [
              "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userassignedidentities/myuseridentity"
            ]
          },
          "location": "centralus",
          "properties": {
            "status": "Running",
            "services": [
              {
                "name": "myService1",
                "serviceUnits": [
                  {
                    "name": "myTopologyUni1",
                    "steps": [
                      {
                        "name": "preDeploymentStep1",
                        "status": "succeeded",
                        "operationInfo": {
                          "endTime": "2018-08-28T03:35:28.556Z",
                          "startTime": "2018-08-28T03:33:56.386Z"
                        }
                      },
                      {
                        "name": "preDeploymentStep2",
                        "status": "succeeded",
                        "operationInfo": {
                          "endTime": "2018-08-28T03:37:28.556Z",
                          "startTime": "2018-08-28T03:36:56.386Z"
                        }
                      },
                      {
                        "name": "deploy",
                        "status": "running",
                        "operationInfo": {
                          "startTime": "2018-08-28T03:38:56.386Z",
                          "lastUpdatedTime": "2018-08-28T03:39:28.556Z"
                        },
                        "resourceOperations": [
                          {
                            "statusCode": "OK",
                            "operationId": "20FC5A21382DA306",
                            "resourceName": "keyVaultcentralus",
                            "resourceType": "Microsoft.KeyVault/vaults",
                            "statusMessage": "",
                            "provisioningState": "Succeeded"
                          }
                        ]
                      }
                    ],
                    "deploymentMode": "Incremental",
                    "targetResourceGroup": "myDeploymentResourceGroup"
                  }
                ],
                "targetLocation": "centralus",
                "targetSubscriptionId": "600c95c5-3ee5-44fe-b190-ca38a19adcd7"
              }
            ],
            "stepGroups": [
              {
                "name": "FirstRegion",
                "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit1'",
                "preDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep1"
                  },
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep2"
                  }
                ],
                "postDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/postDeployStep1"
                  }
                ]
              },
              {
                "name": "SecondRegion",
                "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit2'",
                "preDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep3"
                  },
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep4"
                  }
                ],
                "dependsOnStepGroups": [
                  "FirstRegion"
                ],
                "postDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/postDeployStep5"
                  }
                ]
              }
            ],
            "buildVersion": "1.0.0.1",
            "operationInfo": {
              "startTime": "2018-08-28T03:33:56.386Z",
              "retryAttempt": 0
            },
            "artifactSourceId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/artifactSources/myArtifactSource",
            "totalRetryAttempts": 0,
            "targetServiceTopologyId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/serviceTopologies/myTopology"
          }
        }
      ]
  Rollouts.List:
    description: |-
      Lists the rollouts in a resource group.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/rollouts/list
    example:
      inputs: [
        {}
      ]
      outputs: [
        [
          {
            "name": "CanaryRollout",
            "tags": {},
            "type": "Microsoft.DeploymentManager/rollouts",
            "identity": {
              "type": "userAssigned",
              "identityIds": [
                "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userassignedidentities/myuseridentity"
              ]
            },
            "location": "centralus",
            "properties": {
              "status": "Succeeded",
              "stepGroups": [
                {
                  "name": "FirstRegion",
                  "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit1'",
                  "preDeploymentSteps": [
                    {
                      "stepId": "Microsoft.DeploymentManager/steps/preDeployStep1"
                    },
                    {
                      "stepId": "Microsoft.DeploymentManager/steps/preDeployStep2"
                    }
                  ],
                  "postDeploymentSteps": [
                    {
                      "stepId": "Microsoft.DeploymentManager/steps/postDeployStep1"
                    }
                  ]
                }
              ],
              "buildVersion": "1.0.0.1",
              "operationInfo": {
                "endTime": "2018-08-28T03:43:55.010Z",
                "startTime": "2018-08-28T03:33:56.386Z",
                "retryAttempt": 0
              },
              "artifactSourceId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/artifactSources/binariesArtifactSource",
              "totalRetryAttempts": 0,
              "targetServiceTopologyId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/serviceTopologies/myTopology"
            }
          },
          {
            "name": "ProdRollout",
            "tags": {},
            "type": "Microsoft.DeploymentManager/rollouts",
            "identity": {
              "type": "userAssigned",
              "identityIds": [
                "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userassignedidentities/myuseridentity"
              ]
            },
            "location": "centralus",
            "properties": {
              "status": "Running",
              "stepGroups": [
                {
                  "name": "ProdRegion",
                  "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit2'",
                  "preDeploymentSteps": [
                    {
                      "stepId": "Microsoft.DeploymentManager/steps/preDeployStep"
                    },
                    {
                      "stepId": "Microsoft.DeploymentManager/steps/preDeployStep2"
                    }
                  ],
                  "dependsOnStepGroups": [
                    "FirstRegion"
                  ],
                  "postDeploymentSteps": [
                    {
                      "stepId": "Microsoft.DeploymentManager/steps/postDeployStep3"
                    }
                  ]
                }
              ],
              "buildVersion": "1.0.0.1",
              "operationInfo": {
                "startTime": "2019-05-02T03:33:56.386Z",
                "retryAttempt": 0
              },
              "artifactSourceId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/artifactSources/binariesArtifactSource",
              "totalRetryAttempts": 0,
              "targetServiceTopologyId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/serviceTopologies/myTopology"
            }
          }
        ]
      ]
  Rollouts.Restart:
    description: |-
      Restarts a failed rollout and optionally skips all succeeded steps.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/rollouts/restart
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "name": "myRollout",
          "tags": {},
          "type": "Microsoft.DeploymentManager/rollouts",
          "identity": {
            "type": "userAssigned",
            "identityIds": [
              "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/providers/Microsoft.ManagedIdentity/userassignedidentities/myuseridentity"
            ]
          },
          "location": "centralus",
          "properties": {
            "status": "Running",
            "stepGroups": [
              {
                "name": "FirstRegion",
                "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit1'",
                "preDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep1"
                  },
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep2"
                  }
                ],
                "postDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/postDeployStep1"
                  }
                ]
              },
              {
                "name": "SecondRegion",
                "deploymentTargetId": "Microsoft.DeploymentManager/serviceTopologies/myTopology/services/myService/serviceUnits/myServiceUnit2'",
                "preDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep3"
                  },
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/preDeployStep4"
                  }
                ],
                "dependsOnStepGroups": [
                  "FirstRegion"
                ],
                "postDeploymentSteps": [
                  {
                    "stepId": "Microsoft.DeploymentManager/steps/postDeployStep5"
                  }
                ]
              }
            ],
            "buildVersion": "1.0.0.1",
            "operationInfo": {
              "startTime": "2018-08-28T03:33:56.386Z",
              "retryAttempt": 1
            },
            "artifactSourceId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/artifactSources/myArtifactSource",
            "totalRetryAttempts": 1,
            "targetServiceTopologyId": "/subscriptions/caac1590-e859-444f-a9e0-62091c0f5929/resourceGroups/myResourceGroup/Microsoft.DeploymentManager/serviceTopologies/myTopology"
          }
        }
      ]
  Services.CreateOrUpdate:
    description: |-
      Creates or updates a service in the service topology.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/services/createorupdate
    example:
      inputs: [
        {
          "tags": {},
          "location": "centralus",
          "properties": {
            "targetLocation": "centralus",
            "targetSubscriptionId": "600c95c5-3ee5-44fe-b190-ca38a19adcd7"
          }
        }
      ]
      outputs: [
        {
          "name": "myService",
          "tags": {},
          "type": "Microsoft.DeploymentManager/serviceTopologies/services",
          "location": "centralus",
          "properties": {
            "targetLocation": "centralus",
            "targetSubscriptionId": "600c95c5-3ee5-44fe-b190-ca38a19adcd7"
          }
        }
      ]
  Services.Delete:
    description: |-
      Deletes the service.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/services/delete
    example:
      inputs: [
        {}
      ]
      outputs: [
        {}
      ]
  Services.Get:
    description: |-
      Gets the service.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/services/get
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "name": "myService",
          "tags": {},
          "type": "Microsoft.DeploymentManager/serviceTopologies/services",
          "location": "centralus",
          "properties": {
            "targetLocation": "centralus",
            "targetSubscriptionId": "600c95c5-3ee5-44fe-b190-ca38a19adcd7"
          }
        }
      ]
  Services.List:
    description: |-
      Lists the services in the service topology.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/services/list
    example:
      inputs: [
        {}
      ]
      outputs: [
        [
          {
            "name": "Service East",
            "tags": {},
            "type": "Microsoft.DeploymentManager/serviceTopologies/services",
            "location": "centralus",
            "properties": {
              "targetLocation": "eastus",
              "targetSubscriptionId": "600c95c5-3ee5-44fe-b190-ca38a19adcd7"
            }
          },
          {
            "name": "Service West",
            "tags": {},
            "type": "Microsoft.DeploymentManager/serviceTopologies/services",
            "location": "centralus",
            "properties": {
              "targetLocation": "westus",
              "targetSubscriptionId": "600c95c5-3ee5-44fe-b190-ca38a19adcd7"
            }
          }
        ]
      ]
  ServiceTopologies.CreateOrUpdate:
    description: |-
      Creates or updates a service topology.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/servicetopologies/createorupdate
    example:
      inputs: [
        {
          "tags": {},
          "location": "centralus",
          "properties": {
            "artifactSourceId": "Microsoft.DeploymentManager/artifactSources/myArtifactSource"
          }
        }
      ]
      outputs: [
        {
          "name": "myTopology",
          "tags": {},
          "type": "Microsoft.DeploymentManager/serviceTopologies",
          "location": "centralus",
          "properties": {
            "artifactSourceId": "Microsoft.DeploymentManager/artifactSources/myArtifactSource"
          }
        }
      ]
  ServiceTopologies.Delete:
    description: |-
      Deletes the service topology.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/servicetopologies/delete
    example:
      inputs: [
        {}
      ]
      outputs: [
        {}
      ]
  ServiceTopologies.Get:
    description: |-
      Gets the service topology.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/servicetopologies/get
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "name": "myTopology",
          "tags": {},
          "type": "Microsoft.DeploymentManager/serviceTopologies",
          "location": "centralus",
          "properties": {
            "artifactSourceId": "Microsoft.DeploymentManager/artifactSources/myArtifactSource"
          }
        }
      ]
  ServiceTopologies.List:
    description: |-
      Lists the service topologies in the resource group.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/servicetopologies/list
    example:
      inputs: [
        {}
      ]
      outputs: [
        [
          {
            "name": "ContosoSvc1Topology",
            "tags": {},
            "type": "Microsoft.DeploymentManager/serviceTopologies",
            "location": "centralus",
            "properties": {
              "artifactSourceId": "Microsoft.DeploymentManager/artifactSources/contoso1ArtifactSource"
            }
          },
          {
            "name": "ContosoSvc2Topology",
            "tags": {},
            "type": "Microsoft.DeploymentManager/serviceTopologies",
            "location": "centralus",
            "properties": {
              "artifactSourceId": "Microsoft.DeploymentManager/artifactSources/contoso2ArtifactSource"
            }
          }
        ]
      ]
  ServiceUnits.CreateOrUpdate:
    description: |-
      Creates or updates a service unit under the service in the service topology.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/serviceunits/createorupdate
    example:
      inputs: [
        {
          "tags": {},
          "location": "centralus",
          "properties": {
            "artifacts": {
              "templateArtifactSourceRelativePath": "templates/myTopologyUnit.template.json",
              "parametersArtifactSourceRelativePath": "parameter/myTopologyUnit.parameters.json"
            },
            "deploymentMode": "Incremental",
            "targetResourceGroup": "myDeploymentResourceGroup"
          }
        }
      ]
      outputs: [
        {
          "name": "myServiceUnit",
          "tags": {},
          "type": "Microsoft.DeploymentManager/serviceTopologies/services/serviceUnits",
          "location": "centralus",
          "properties": {
            "artifacts": {
              "templateArtifactSourceRelativePath": "templates/myTopologyUnit.template.json",
              "parametersArtifactSourceRelativePath": "parameter/myTopologyUnit.parameters.json"
            },
            "deploymentMode": "Incremental",
            "targetResourceGroup": "myDeploymentResourceGroup"
          }
        }
      ]
  ServiceUnits.Delete:
    description: |-
      Deletes the service unit.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/serviceunits/delete
    example:
      inputs: [
        {}
      ]
      outputs: [
        {}
      ]
  ServiceUnits.Get:
    description: |-
      Gets the service unit.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/serviceunits/get
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "name": "myServiceUnit",
          "tags": {},
          "type": "Microsoft.DeploymentManager/servicetopologies/services/serviceunits",
          "location": "centralus",
          "properties": {
            "artifacts": {
              "templateArtifactSourceRelativePath": "templates/myTopologyUnit.template.json",
              "parametersArtifactSourceRelativePath": "parameter/myTopologyUnit.parameters.json"
            },
            "deploymentMode": "Incremental",
            "targetResourceGroup": "myDeploymentResourceGroup"
          }
        }
      ]
  ServiceUnits.List:
    description: |-
      Lists the service units under a service in the service topology.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/serviceunits/list
    example:
      inputs: [
        {}
      ]
      outputs: [
        [
          {
            "name": "BackEndServiceUnit",
            "tags": {},
            "type": "Microsoft.DeploymentManager/servicetopologies/services/serviceunits",
            "location": "centralus",
            "properties": {
              "artifacts": {
                "templateArtifactSourceRelativePath": "templates/backend.template.json",
                "parametersArtifactSourceRelativePath": "parameter/backend.parameters.json"
              },
              "deploymentMode": "Incremental",
              "targetResourceGroup": "myDeploymentResourceGroup"
            }
          },
          {
            "name": "FrontEndServiceUnit",
            "tags": {},
            "type": "Microsoft.DeploymentManager/servicetopologies/services/serviceunits",
            "location": "centralus",
            "properties": {
              "artifacts": {
                "templateArtifactSourceRelativePath": "templates/frontend.template.json",
                "parametersArtifactSourceRelativePath": "parameter/frontend.parameters.json"
              },
              "deploymentMode": "Complete",
              "targetResourceGroup": "myDeploymentResourceGroup"
            }
          }
        ]
      ]
  Steps.CreateOrUpdate:
    description: |-
      Creates or updates a rollout step with the given step properties.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/steps/createorupdate
    example:
      inputs: [
        {
          "tags": {},
          "location": "centralus",
          "properties": {
            "stepType": "HealthCheck",
            "attributes": {
              "type": "REST",
              "properties": {
                "healthChecks": [
                  {
                    "name": "appHealth",
                    "request": {
                      "uri": "https://resthealth.healthservice.com/api/applications/contosoApp/healthStatus",
                      "method": "GET",
                      "authentication": {
                        "in": "Query",
                        "name": "Code",
                        "type": "ApiKey",
                        "value": "NBCapiMOBQyAAbCkeytoPadnvO0eGHmidwFz5rXpappznKp3Jt7LLg=="
                      }
                    },
                    "response": {
                      "regex": {
                        "matches": [
                          "(?i)Contoso-App",
                          "(?i)\"health_status\":((.|\n)*)\"(green|yellow)\"",
                          "(?mi)^(\"application_host\": 94781052)$"
                        ],
                        "matchQuantifier": "All"
                      },
                      "successStatusCodes": [
                        "OK"
                      ]
                    }
                  },
                  {
                    "name": "serviceHealth",
                    "request": {
                      "uri": "https://resthealth.healthservice.com/api/services/contosoService/healthStatus",
                      "method": "GET",
                      "authentication": {
                        "in": "Header",
                        "name": "code",
                        "type": "ApiKey",
                        "value": "NBCapiMOBQyAAbCkeytoPadnvO0eGHmidwFz5rXpappznKp3Jt7LLg=="
                      }
                    },
                    "response": {
                      "regex": {
                        "matches": [
                          "(?i)Contoso-Service-EndToEnd",
                          "(?i)\"health_status\":((.|\n)*)\"(green)\""
                        ],
                        "matchQuantifier": "All"
                      },
                      "successStatusCodes": [
                        "OK"
                      ]
                    }
                  }
                ]
              },
              "waitDuration": "PT15M",
              "maxElasticDuration": "PT30M",
              "healthyStateDuration": "PT2H"
            }
          }
        }
      ]
      outputs: [
        {
          "name": "healthCheckStep",
          "tags": {},
          "type": "Microsoft.DeploymentManager/steps",
          "location": "centralus",
          "properties": {
            "stepType": "HealthCheck",
            "attributes": {
              "type": "REST",
              "properties": {
                "healthChecks": [
                  {
                    "name": "appHealth",
                    "request": {
                      "uri": "https://resthealth.healthservice.com/api/applications/contosoApp/healthStatus",
                      "method": "GET",
                      "authentication": {
                        "in": "Query",
                        "name": "Code",
                        "type": "ApiKey",
                        "value": "NBCapiMOBQyAAbCkeytoPadnvO0eGHmidwFz5rXpappznKp3Jt7LLg=="
                      }
                    },
                    "response": {
                      "regex": {
                        "matches": [
                          "(?i)Contoso-App",
                          "(?i)\"health_status\":((.|\n)*)\"(green|yellow)\"",
                          "(?mi)^(\"application_host\": 94781052)$"
                        ],
                        "matchQuantifier": "All"
                      },
                      "successStatusCodes": [
                        "OK"
                      ]
                    }
                  },
                  {
                    "name": "serviceHealth",
                    "request": {
                      "uri": "https://resthealth.healthservice.com/api/services/contosoService/healthStatus",
                      "method": "GET",
                      "authentication": {
                        "in": "Header",
                        "name": "code",
                        "type": "ApiKey",
                        "value": "NBCapiMOBQyAAbCkeytoPadnvO0eGHmidwFz5rXpappznKp3Jt7LLg=="
                      }
                    },
                    "response": {
                      "regex": {
                        "matches": [
                          "(?i)Contoso-Service-EndToEnd",
                          "(?i)\"health_status\":((.|\n)*)\"(green)\""
                        ],
                        "matchQuantifier": "All"
                      },
                      "successStatusCodes": [
                        "OK"
                      ]
                    }
                  }
                ]
              },
              "waitDuration": "PT15M",
              "maxElasticDuration": "PT30M",
              "healthyStateDuration": "PT2H"
            }
          }
        }
      ]
  Steps.Delete:
    description: |-
      Deletes the step.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/steps/delete
    example:
      inputs: [
        {}
      ]
      outputs: [
        {}
      ]
  Steps.Get:
    description: |-
      Gets the step.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/steps/get
    example:
      inputs: [
        {}
      ]
      outputs: [
        {
          "name": "deploymentStep1",
          "tags": {},
          "type": "Microsoft.DeploymentManager/steps",
          "location": "centralus",
          "properties": {
            "stepType": "Wait",
            "attributes": {
              "duration": "PT20M"
            }
          }
        }
      ]
  Steps.List:
    description: |-
      Lists the steps in a resource group.
    versions:
      from: 2019.11.1-preview
    link: https://docs.microsoft.com/en-us/rest/api/deploymentmanager/steps/list
    example:
      inputs: [
        {}
      ]
      outputs: [
        [
          {
            "name": "waitStepfrontEnd",
            "tags": {},
            "type": "Microsoft.DeploymentManager/steps",
            "location": "centralus",
            "properties": {
              "stepType": "Wait",
              "attributes": {
                "duration": "PT10M"
              }
            }
          },
          {
            "name": "waitStepBackEnd",
            "tags": {},
            "type": "Microsoft.DeploymentManager/steps",
            "location": "centralus",
            "properties": {
              "stepType": "Wait",
              "attributes": {
                "duration": "PT30M"
              }
            }
          }
        ]
      ]